//// ------------------------------------------------------
//// THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
//// ------------------------------------------------------

Table AuditLog {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  userId String [not null]
  context AuditLogContextEnum [not null]
  method AuditLogRequestMethodEnum
  event String [not null]
  data Json
}

Table Therapy {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  name String [not null]
  description String
  duration Int
  diagnosis Diagnosis
  diagnosisId Int
  condition Condition
  conditionId Int
  patient Patient [not null]
  doctor Doctor
  doctorId Int
  task Task [not null]
  patientTherapies PatientTherapies [not null]
  doctorTherapies DoctorTherapies [not null]
}

Table Diagnosis {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  name String [not null]
  description String
  therapies Therapy [not null]
}

Table Condition {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  name String [not null]
  description String
  severity String
  symptoms Symptom [not null]
  therapy Therapy [not null]
}

Table Symptom {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  name String [not null]
  description String
  conditions Condition [not null]
}

Table User {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  name String [not null]
  email String [unique, not null]
  password String [not null]
  role RoleType [not null, default: 'USER']
  patients Patient [not null]
  doctors Doctor [not null]
  consumers Consumer [not null]
}

Table Patient {
  id Int [pk, increment]
  lastTherapy Therapy
  lastTherapyId Int
  user User
  userId Int
  patientTherapies PatientTherapies [not null]
}

Table Doctor {
  id Int [pk, increment]
  specialty String
  therapies Therapy [not null]
  user User
  userId Int
  doctorTherapies DoctorTherapies [not null]
}

Table Consumer {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  preferences String
  user User
  userId Int
}

Table Resource {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  name String [not null]
}

Table Task {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  therapy Therapy
  therapyId Int
}

Table Integration {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  apiDetails String
}

Table PatientTherapies {
  patient Patient [not null]
  patientId Int [not null]
  therapy Therapy [not null]
  therapyId Int [not null]

  indexes {
    (patientId, therapyId) [pk]
  }
}

Table DoctorTherapies {
  doctor Doctor [not null]
  doctorId Int [not null]
  therapy Therapy [not null]
  therapyId Int [not null]

  indexes {
    (doctorId, therapyId) [pk]
  }
}

Enum RoleType {
  USER
  ADMIN
}

Enum AuditLogContextEnum {
  http
  ws
  rpc
}

Enum AuditLogRequestMethodEnum {
  get
  post
  put
  patch
  delete
}

Ref: Therapy.diagnosisId > Diagnosis.id

Ref: Therapy.conditionId > Condition.id

Ref: Therapy.doctorId > Doctor.id

Ref: Patient.lastTherapyId > Therapy.id

Ref: Patient.userId > User.id

Ref: Doctor.userId > User.id

Ref: Consumer.userId > User.id

Ref: Task.therapyId > Therapy.id

Ref: PatientTherapies.patientId > Patient.id

Ref: PatientTherapies.therapyId > Therapy.id

Ref: DoctorTherapies.doctorId > Doctor.id

Ref: DoctorTherapies.therapyId > Therapy.id